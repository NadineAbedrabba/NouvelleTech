<div class="review-container">
    <div class="floating-food">
      <div class="food-icon">🍕</div>
      <div class="food-icon">🍣</div>
      <div class="food-icon">🍔</div>
    </div>
  
    <h1 class="review-title pulse">Donnez votre avis</h1>
    
    <div class="review-card wobble">
      <!-- Note globale -->
      <div class="overall-rating">
        <div class="rating-bubble">
          <div class="rating-value">{{ overallRating.toFixed(1) }}</div>
          <div class="rating-max">/5</div>
        </div>
        <h3>Votre Note Globale</h3>
        <div class="stars">
          <span *ngFor="let star of [1,2,3,4,5]" 
                [class.filled]="star <= overallRating"
                [class.bounce]="star <= overallRating">★</span>
        </div>
      </div>
  
      <!-- Formulaire -->
      <form class="review-form" (ngSubmit)="submitReview()">
        <!-- Commentaire -->
        <div class="form-group floating-label">
          <textarea id="reviewText" [(ngModel)]="reviewText" name="reviewText" required></textarea>
          <label for="reviewText">Écrivez votre avis*</label>
          <div class="underline"></div>
        </div>
  
        <!-- Notes -->
        <div class="rating-categories">
          <div class="rating-category" *ngFor="let category of ratingCategories">
            <label>{{category.label}}</label>
            <div class="star-rating">
              <span *ngFor="let star of [1,2,3,4,5]" 
                    (click)="category.rating = star"
                    [class.active]="star <= category.rating"
                    [class.jump]="star === category.rating">★</span>
            </div>
          </div>
        </div>
  
        <!-- Sélecteurs -->
        <div class="selector-group">
          <div class="custom-select">
            <select [(ngModel)]="companion" name="companion">
              <option value="" disabled selected>Avec qui ?</option>
              <option value="family">👨‍👩‍👧‍👦 Famille</option>
              <option value="friends">👯‍♀️ Amis</option>
              <option value="couple">💑 Couple</option>
              <option value="colleagues">👔 Collègues</option>
              <option value="alone">🧍‍♂️ Seul(e)</option>
            </select>
            <div class="select-arrow">▼</div>
          </div>
  
          <div class="custom-select">
            <select [(ngModel)]="occasion" name="occasion">
              <option value="" disabled selected>Pourquoi ?</option>
              <option value="dinner">🌙 Dîner</option>
              <option value="lunch">☀️ Déjeuner</option>
              <option value="business">💼 Repas d'affaires</option>
              <option value="celebration">🎉 Célébration</option>
              <option value="other">✨ Autre</option>
            </select>
            <div class="select-arrow">▼</div>
          </div>
        </div>
  
        <!-- Certification -->
        <div class="certification">
          <label class="checkbox-container">
            <input type="checkbox" [(ngModel)]="isCertified" name="certify" required>
            <span class="checkmark"></span>
            <span class="certify-text">Je certifie que cet avis reflète ma propre expérience</span>
          </label>
        </div>
  
        <button type="submit" class="submit-btn" [disabled]="!isFormValid()">
          <span *ngIf="!isSubmitting">Envoyer l'avis 🚀</span>
          <span *ngIf="isSubmitting" class="submit-loading">
            <span class="loading-dot">.</span>
            <span class="loading-dot">.</span>
            <span class="loading-dot">.</span>
          </span>
        </button>
      </form>
    </div>
  </div>
